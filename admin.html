<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Designer - Admin Panel</title>

    <!-- Fabric.js for print area editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Admin CSS -->
    <link rel="stylesheet" href="src/css/admin.css">
</head>
<body>
    <div id="admin-app">
        <!-- Sidebar Navigation -->
        <aside id="admin-sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-palette"></i> Designer Admin</h1>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-section="products">
                    <i class="fas fa-box"></i>
                    <span>Products</span>
                </a>
                <a href="#" class="nav-item" data-section="templates">
                    <i class="fas fa-th-large"></i>
                    <span>Templates</span>
                </a>
                <a href="#" class="nav-item" data-section="fonts">
                    <i class="fas fa-font"></i>
                    <span>Fonts</span>
                </a>
                <a href="#" class="nav-item" data-section="pricing">
                    <i class="fas fa-dollar-sign"></i>
                    <span>Pricing Rules</span>
                </a>
                <a href="#" class="nav-item" data-section="orders">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Orders</span>
                </a>
                <a href="#" class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <a href="index.html" class="btn secondary" target="_blank">
                    <i class="fas fa-external-link-alt"></i> View Designer
                </a>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main id="admin-main">
            <!-- Top Bar -->
            <header id="admin-header">
                <div class="header-left">
                    <button class="btn-icon" id="toggle-sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 id="section-title">Dashboard</h2>
                </div>
                <div class="header-right">
                    <span class="storage-indicator">
                        <i class="fas fa-database"></i>
                        <span id="storage-status">localStorage</span>
                    </span>
                </div>
            </header>

            <!-- Content Sections -->
            <div id="admin-content">
                <!-- Dashboard Section -->
                <section class="admin-section active" data-section="dashboard">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <i class="fas fa-box"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="stat-products">0</span>
                                <span class="stat-label">Products</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-th-large"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="stat-templates">0</span>
                                <span class="stat-label">Templates</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-shopping-bag"></i>
                            <div class="stat-info">
                                <span class="stat-value" id="stat-orders">0</span>
                                <span class="stat-label">Orders</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-header">
                                <h3>Quick Actions</h3>
                            </div>
                            <div class="card-body">
                                <button class="btn primary" data-action="new-product">
                                    <i class="fas fa-plus"></i> Add Product
                                </button>
                                <button class="btn secondary" data-action="new-template">
                                    <i class="fas fa-plus"></i> Create Template
                                </button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3>Recent Orders</h3>
                            </div>
                            <div class="card-body">
                                <div id="recent-orders" class="empty-state">
                                    <i class="fas fa-inbox"></i>
                                    <p>No orders yet</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Products Section -->
                <section class="admin-section" data-section="products">
                    <div class="section-header">
                        <h3>Products</h3>
                        <button class="btn primary" id="add-product-btn">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                    <div class="section-body">
                        <div id="products-list" class="items-grid">
                            <!-- Products will be rendered here -->
                        </div>
                    </div>

                    <!-- Product Editor Modal -->
                    <div class="modal" id="product-modal">
                        <div class="modal-content modal-xlarge">
                            <div class="modal-header">
                                <h3 id="product-modal-title">Add Product</h3>
                                <button class="btn-icon modal-close"><i class="fas fa-times"></i></button>
                            </div>
                            <div class="modal-body">
                                <!-- Tab Navigation -->
                                <div class="modal-tabs">
                                    <button class="modal-tab active" data-tab="basic-info">
                                        <i class="fas fa-info-circle"></i> Basic Info
                                    </button>
                                    <button class="modal-tab" data-tab="print-areas">
                                        <i class="fas fa-vector-square"></i> Print Areas
                                    </button>
                                    <button class="modal-tab" data-tab="variations">
                                        <i class="fas fa-tags"></i> Variations
                                    </button>
                                    <button class="modal-tab" data-tab="vas">
                                        <i class="fas fa-concierge-bell"></i> Value Added Services
                                    </button>
                                </div>

                                <form id="product-form">
                                    <input type="hidden" id="product-id">

                                    <!-- Basic Info Tab -->
                                    <div class="modal-tab-content active" data-tab-content="basic-info">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Product Name *</label>
                                                <input type="text" id="product-name" required>
                                            </div>
                                            <div class="form-group">
                                                <label>SKU</label>
                                                <input type="text" id="product-sku">
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label>Description</label>
                                            <textarea id="product-description" rows="3"></textarea>
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Base Price ($)</label>
                                                <input type="number" id="product-price" step="0.01" value="0">
                                            </div>
                                            <div class="form-group">
                                                <label>Category</label>
                                                <select id="product-category">
                                                    <option value="apparel">Apparel</option>
                                                    <option value="accessories">Accessories</option>
                                                    <option value="home">Home & Living</option>
                                                    <option value="stationery">Stationery</option>
                                                    <option value="other">Other</option>
                                                </select>
                                            </div>
                                        </div>

                                        <h4>Output Settings</h4>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label>Output DPI</label>
                                                <input type="number" id="product-dpi" value="300">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Print Areas Tab -->
                                    <div class="modal-tab-content" data-tab-content="print-areas">
                                        <div class="print-area-editor-layout">
                                            <!-- Views & Colors Panel -->
                                            <div class="views-panel">
                                                <!-- Views Section -->
                                                <div class="panel-section">
                                                    <div class="panel-header">
                                                        <h4>Product Views</h4>
                                                        <button type="button" class="btn small secondary" id="add-view-btn">
                                                            <i class="fas fa-plus"></i> Add
                                                        </button>
                                                    </div>
                                                    <div id="views-list" class="views-list">
                                                        <!-- Views will be rendered here -->
                                                    </div>
                                                </div>

                                                <!-- Colors Section -->
                                                <div class="panel-section">
                                                    <div class="panel-header">
                                                        <h4>Colors</h4>
                                                        <button type="button" class="btn small secondary" id="add-color-btn">
                                                            <i class="fas fa-plus"></i> Add
                                                        </button>
                                                    </div>
                                                    <div id="colors-list" class="colors-list">
                                                        <!-- Colors will be rendered here -->
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Print Area Canvas -->
                                            <div class="print-area-canvas-panel">
                                                <div class="panel-header">
                                                    <h4>Define Print Area</h4>
                                                    <span class="help-text">Drag and resize the blue box to set the print area</span>
                                                </div>
                                                <div class="print-area-canvas-container">
                                                    <div id="print-area-placeholder" class="print-area-placeholder">
                                                        <i class="fas fa-image"></i>
                                                        <p>Upload a product image for this view</p>
                                                        <button type="button" class="btn secondary" id="upload-view-image-btn">
                                                            <i class="fas fa-upload"></i> Upload Image
                                                        </button>
                                                        <input type="file" id="view-image-input" accept="image/*" hidden>
                                                    </div>
                                                    <canvas id="print-area-canvas"></canvas>
                                                </div>
                                                <!-- Print Area Dimensions -->
                                                <div class="print-area-info">
                                                    <div class="form-row">
                                                        <div class="form-group">
                                                            <label>Print Width (inches)</label>
                                                            <input type="number" id="print-area-width" step="0.1" value="8">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Print Height (inches)</label>
                                                            <input type="number" id="print-area-height" step="0.1" value="8">
                                                        </div>
                                                    </div>
                                                    <p class="help-text">
                                                        <i class="fas fa-info-circle"></i>
                                                        This is the actual print size. The blue box position defines where it appears on the product.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Variations Tab -->
                                    <div class="modal-tab-content" data-tab-content="variations">
                                        <div class="variations-layout">
                                            <!-- Sizes Section -->
                                            <div class="card">
                                                <div class="card-header">
                                                    <h4><i class="fas fa-ruler"></i> Available Sizes</h4>
                                                    <button type="button" class="btn small secondary" id="add-size-btn">
                                                        <i class="fas fa-plus"></i> Add Size
                                                    </button>
                                                </div>
                                                <div class="card-body">
                                                    <p class="help-text mb-2">
                                                        <i class="fas fa-info-circle"></i>
                                                        Define the sizes available for this product. You can add an upcharge for each size.
                                                    </p>
                                                    <div id="sizes-list" class="sizes-list">
                                                        <!-- Sizes will be rendered here -->
                                                        <div class="empty-state small">
                                                            <i class="fas fa-ruler"></i>
                                                            <p>No sizes added yet</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Value Added Services Tab -->
                                    <div class="modal-tab-content" data-tab-content="vas">
                                        <div class="vas-layout">
                                            <p class="help-text mb-2">
                                                <i class="fas fa-info-circle"></i>
                                                Configure optional services customers can add to their order.
                                            </p>

                                            <!-- Fold and Bag -->
                                            <div class="card vas-card">
                                                <div class="card-header">
                                                    <div class="vas-toggle">
                                                        <label class="switch">
                                                            <input type="checkbox" id="vas-fold-bag-enabled">
                                                            <span class="slider"></span>
                                                        </label>
                                                        <h4><i class="fas fa-box-open"></i> Fold & Bag</h4>
                                                    </div>
                                                </div>
                                                <div class="card-body vas-options" id="vas-fold-bag-options">
                                                    <div class="form-row">
                                                        <div class="form-group">
                                                            <label>Price ($)</label>
                                                            <input type="number" id="vas-fold-bag-price" step="0.01" value="0" min="0">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Description (optional)</label>
                                                            <input type="text" id="vas-fold-bag-desc" placeholder="e.g., Individual poly bag packaging">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Neck Tags -->
                                            <div class="card vas-card">
                                                <div class="card-header">
                                                    <div class="vas-toggle">
                                                        <label class="switch">
                                                            <input type="checkbox" id="vas-neck-tags-enabled">
                                                            <span class="slider"></span>
                                                        </label>
                                                        <h4><i class="fas fa-tag"></i> Neck Tags</h4>
                                                    </div>
                                                </div>
                                                <div class="card-body vas-options" id="vas-neck-tags-options">
                                                    <div class="form-row">
                                                        <div class="form-group">
                                                            <label>Price per tag ($)</label>
                                                            <input type="number" id="vas-neck-tags-price" step="0.01" value="0" min="0">
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Description (optional)</label>
                                                            <input type="text" id="vas-neck-tags-desc" placeholder="e.g., Custom printed neck label">
                                                        </div>
                                                    </div>
                                                    <p class="help-text">
                                                        <i class="fas fa-lightbulb"></i>
                                                        Customers will upload neck tag images for each size when ordering.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button class="btn secondary modal-close">Cancel</button>
                                <button class="btn primary" id="save-product-btn">Save Product</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Templates Section -->
                <section class="admin-section" data-section="templates">
                    <div class="section-header">
                        <h3>Templates</h3>
                        <button class="btn primary" id="add-template-btn">
                            <i class="fas fa-plus"></i> Create Template
                        </button>
                    </div>
                    <div class="section-body">
                        <div class="filter-bar">
                            <select id="template-product-filter">
                                <option value="">All Products</option>
                            </select>
                            <select id="template-category-filter">
                                <option value="">All Categories</option>
                            </select>
                        </div>
                        <div id="templates-list" class="items-grid">
                            <!-- Templates will be rendered here -->
                        </div>
                    </div>
                </section>

                <!-- Fonts Section -->
                <section class="admin-section" data-section="fonts">
                    <div class="section-header">
                        <h3>Fonts</h3>
                        <button class="btn primary" id="add-font-btn">
                            <i class="fas fa-plus"></i> Add Font
                        </button>
                    </div>
                    <div class="section-body">
                        <div id="fonts-list" class="fonts-list">
                            <!-- Fonts will be rendered here -->
                        </div>
                    </div>
                </section>

                <!-- Pricing Section -->
                <section class="admin-section" data-section="pricing">
                    <div class="section-header">
                        <h3>Pricing Rules</h3>
                        <button class="btn primary" id="save-pricing-btn">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                    <div class="section-body">
                        <div class="card">
                            <div class="card-header">
                                <h4>Per-Element Pricing</h4>
                            </div>
                            <div class="card-body">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Per Text Element ($)</label>
                                        <input type="number" id="price-per-text" step="0.01" value="0">
                                    </div>
                                    <div class="form-group">
                                        <label>Per Image Element ($)</label>
                                        <input type="number" id="price-per-image" step="0.01" value="0">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h4>Print Area Pricing</h4>
                            </div>
                            <div class="card-body">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Additional Side/View ($)</label>
                                        <input type="number" id="price-per-view" step="0.01" value="0">
                                    </div>
                                    <div class="form-group">
                                        <label>Full Coverage Surcharge ($)</label>
                                        <input type="number" id="price-full-coverage" step="0.01" value="0">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Orders Section -->
                <section class="admin-section" data-section="orders">
                    <div class="section-header">
                        <h3>Orders</h3>
                        <div class="header-actions">
                            <select id="order-status-filter">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="processing">Processing</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                    </div>
                    <div class="section-body">
                        <table class="data-table" id="orders-table">
                            <thead>
                                <tr>
                                    <th>Order #</th>
                                    <th>Date</th>
                                    <th>Customer</th>
                                    <th>Product</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="orders-tbody">
                                <!-- Orders will be rendered here -->
                            </tbody>
                        </table>
                        <div id="orders-empty" class="empty-state">
                            <i class="fas fa-inbox"></i>
                            <p>No orders yet</p>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section class="admin-section" data-section="settings">
                    <div class="section-header">
                        <h3>Settings</h3>
                        <button class="btn primary" id="save-settings-btn">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                    </div>
                    <div class="section-body">
                        <div class="card">
                            <div class="card-header">
                                <h4>General Settings</h4>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label>Default Canvas DPI</label>
                                    <select id="setting-default-dpi">
                                        <option value="72">72 DPI (Screen)</option>
                                        <option value="150">150 DPI (Medium)</option>
                                        <option value="300" selected>300 DPI (Print)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Default Unit</label>
                                    <select id="setting-default-unit">
                                        <option value="inches" selected>Inches</option>
                                        <option value="cm">Centimeters</option>
                                        <option value="px">Pixels</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h4>Data Management</h4>
                            </div>
                            <div class="card-body">
                                <p class="text-muted">Current storage: localStorage (for development)</p>
                                <div class="button-group">
                                    <button class="btn secondary" id="export-data-btn">
                                        <i class="fas fa-download"></i> Export All Data
                                    </button>
                                    <button class="btn secondary" id="import-data-btn">
                                        <i class="fas fa-upload"></i> Import Data
                                    </button>
                                    <button class="btn danger" id="clear-data-btn">
                                        <i class="fas fa-trash"></i> Clear All Data
                                    </button>
                                </div>
                                <input type="file" id="import-data-input" accept=".json" hidden>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Admin JavaScript -->
    <script type="module" src="src/js/admin/AdminApp.js"></script>
</body>
</html>
